<div class="panel-card-container" [ngClass]="panelCardClasses">
  <mat-tab-group #matTabGroup dynamicHeight class="tab-group-container">
    <mat-tab *ngFor="let fabIcon of fabIcons; let panelTabIndex = index; trackBy: fabTrackBy" [label]="'1'">
      <ng-template mat-tab-label>
        <div class="fab-container" (click)="handleChangeTab(panelTabIndex)" [matTooltip]="fabIcon.toolTipText">
          <button mat-mini-fab [color]="fabIcon.color">{{ fabIcon.label }}</button>
        </div>
      </ng-template>

      <div class="content">
        <div *ngIf="showHeader" class="panel-heading">
          <div class="section">
            <span class="header-title" matTooltip="{{fabIcon.headerTitle}}">{{ fabIcon.headerTitle }}</span>

            <div class="button-group">
              <button mat-icon-button *ngIf="canExpand" (click)="toggleExpand()">
                <ual-orion-icon [icon]="expandedIcon"></ual-orion-icon>
              </button>

              <ng-container *ngIf="showMenu">
                <mat-menu #menu="matMenu" class="ual-card-menu">
                  <button mat-menu-item [disabled]="!canMoveUp" (click)="movePanelUp()">
                    <ual-orion-icon icon="arrow_up"></ual-orion-icon>
                    <span>Move up</span>
                  </button>
                  <button mat-menu-item [disabled]="!canMoveDown" (click)="movePanelDown()">
                    <ual-orion-icon icon="arrow_down"></ual-orion-icon>
                    <span>Move down</span>
                  </button>
                </mat-menu>

                <button mat-icon-button [matMenuTriggerFor]="menu" (mousedown)="checkSiblingElements()">
                  <ual-orion-icon icon="more_vert"></ual-orion-icon>
                </button>
              </ng-container>
            </div>
          </div>
        </div>

        <div *ngIf="fabIcon.selected" class="panel-content">
          <ng-content></ng-content>
        </div>
      </div>
    </mat-tab>

    <mat-tab *ngIf="canAddNewFab" disabled="true">
      <ng-template mat-tab-label>
        <button mat-icon-button (click)="handleAddNewFab()">
          <ual-orion-icon class="add-icon" icon="add"></ual-orion-icon>
        </button>
      </ng-template>
    </mat-tab>
  </mat-tab-group>

  <div *ngIf="stickyContent" class="content sticky">
    <div class="panel-content">
      <ng-content select="[sticky_content]"></ng-content>
    </div>
  </div>
</div>
